{% assign img_path = './img/slides/git' %}

<section class="unix">
    
    <section>
        <img src="{{ img_path }}/git-logo.png" alt="" width="150">
        <h4>Flujo de trabajo con Git</h4>
    </section>
    
    <section>
        <h3>Repositorio Local</h3>
        <h4 class="marker" style="text-align: center; text-transform: none; font-size: 1.2em">A nivel local disponemos de 3 estados diferenciados:</h4><br />
        <ul>
            <li><span class="marker">Working Dir</span> > El directorio donde almacenamos los archivos</li>
            <li><span class="marker">Staging</span> > El estado en el que avisamos a Git de que hemos realizado cambios</li>
            <li><span class="marker">HEAD</span> > El puntero hacia el último bloque de código <code style="font-size: .8em">(commit)</code></li>
        </ul>
    </section>

    <section>
        <h3>Working dir</h3>
        <p>El primer nivel es nuestra <span class="marker">carpeta de trabajo</span>. Podemos añadir, quitar, editar archivos y Git sólo se encargará de controlar los archivos que han sido modificados:</p>

        <img src="{{img_path}}/git-level-wd.png" alt="">
    </section>
    
    <section>
        <h3>Añadir archivos al Staging:</h3>
        <p>Una vez creados, modificados, añadidos o borrados los archivos al <span class="marker">working dir</span> los pasamos al <span>staging</span> mediante:</p>
        <pre><code data-trim contenteditable>

$ git add [nombre de archivo/os]
        </code></pre>
        <p> o bien:</p>
        <pre><code data-trim contenteditable>
$ git add &#45;all [todos los archivos]

        </code></pre>
    </section>

    <section>
        <h3>Staging</h3>
        <p>En el segundo nivel nuestros archivos están bajo el control de Git. Podemos seguir trabajando y repetir el proceso tantas veces como necesitemos.</p>

        <img src="{{img_path}}/git-level-staging.png" alt="">
    </section>

    <section>
        <h3>Añadir archivos al HEAD:</h3>
        <p>Cuando hemos completado un conjunto de cambios, los "empaquetamos" mediante la instrucción <span>commit</span> y los colocamos en el <span class="marker">HEAD</span> mediante:</p>
        <pre><code data-trim contenteditable style="font-size: 1.2em">
$ git commit -m ['mensaje descriptivo de los cambios']
        </code></pre>
    </section>

    <section>
        <h3>HEAD</h3>
        <p>Nuestro conjunto de cambios está listo para enviar al repositorio remoto. El HEAD es nuestra "bandeja de salida". Podemos seguir trabajando y crear más "commits".</p>

        <img src="{{img_path}}/git-level-HEAD.png" alt="">
    </section>

    <section>
        <h3>Trabajando con repositorios remotos</h3>
        <p>Hasta ahora hemos usado Git para controlar conjuntos de cambios en local. <br />Vamos a crear un repositorio remoto y lo vincularemos a nuestro local para poder trabajar en equipo:</p>

        <a href="http://github.com" target="_blank">Créate una cuenta en Github.com</a>
    </section>

    <section>
        <h3>Añadir repositorio remoto</h3>
        <p>Una vez creado el repositorio remoto en Github lo "vinculamos" a nuestro repositorio local mediante:</p>
        <pre><code data-trim contenteditable style="font-size: 1.2em">
$ git remote add origin https://github.com/user/repo.git
        </code></pre>
    </section>

    <section>
        <h3>Enviando cambios a remoto</h3>
        <p>Una vez indicado a Git que tenemos un repositorio remoto podemos enviar el conjunto de cambios contenidos en nuestro HEAD mediante:</p>
        <pre><code data-trim contenteditable style="font-size: 1.2em">
$ git push -u origin master
        </code></pre>
    </section>

    <section>
        <h3>Origin</h3>
        <p>Por defecto Git denomina <span class="marker">origin</span> a nuestro repositorio remoto y crea una rama llamada <span class="marker">master</span>. Enviamos el contenido de HEAD mediante:</p>

        <img src="{{img_path}}/git-level-origin.png" alt="">
    </section>

    <section>
        <h3>Trabajando en equipo</h3>
        <p>Un software de control de versiones adquiere mayor relevancia cuando colaboran diferentes miembros de un equipo sobre el mismo código.</p>
        <p>Una vez creado el repositorio remoto, el resto de miembros del equipo pueden bajarse una copia a sus equipos mediante:</p>
        <pre><code data-trim contenteditable style="font-size: 1.2em">
$ git clone https://github.com/user/repo.git
        </code></pre>
    </section>

    <section>
        <h3>Obteniendo archivos remotos</h3>
        <p>Una vez clonado el repositorio ya podemos empezar a añadir código<br /> a nuestro <span class="marker">working dir, stage y HEAD</span></p>
        <p>Antes de enviar nuestros cambios tenemos que bajarnos la última versión de <span class="marker">origin</span></p>
        <pre><code data-trim contenteditable style="font-size: 1.2em">
$ git pull origin master
        </code></pre>
    </section>

    <section>
        <h3>Sincronizando versiones</h3>
        <p>Cuando obtenemos archivos del repositorio remoto a nuestra copia local Git obtiene todos los archivos nuevos que se hayan añadido y elimina los que se hayan quitado.</p>

        <img src="{{img_path}}/git-level-pull.png" alt="">
    </section>

    <section>
        <h3>Combinando archivos</h3>
        <p>Cuando dos miembros del equipo han modificado el mismo archivo Git procura combinarlos automáticamente. </p>
        <p>Puede darse el caso de que surja un conflicto si Git no reconoce qué parte del código ha de quedarse y cual eliminar. En este caso hemos de editarlo manualmente.</p>
    </section>

    <section>
        <h3>Estado de Git</h3>
        <p>Podemos consultar en cualquier momento cual es el estado de nuestros archivos mediante:</p>
        <pre><code data-trim contenteditable style="font-size: 1.2em">
$ git status
        </code></pre>
    </section>

    <section>
        <h3>Consultar historial</h3>
        <p>Además, podemos consultar el historial de "commits" realizados por los diferentes miembros del equipo mediante:</p>
        <pre><code data-trim contenteditable style="font-size: 1.2em">
$ git log
        </code></pre>
    </section>

</section>